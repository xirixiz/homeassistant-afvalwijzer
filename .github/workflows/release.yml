name: "Afvalwijzer: Release"

on:
  push:
    tags:
      - "*"

jobs:
  release:
    runs-on: "ubuntu-latest"
    steps:
      - uses: "actions/checkout@v6"
      - run: zip -r ../../afvalwijzer.zip . -x "tests/*" "*/__pycache__/*" "__pycache__/*"
        working-directory: custom_components/afvalwijzer
      - uses: "softprops/action-gh-release@v2"
        with:
          files: "afvalwijzer.zip"
          generate_release_notes: true
          prerelease: ${{ contains(github.ref_name, '-b') }}
